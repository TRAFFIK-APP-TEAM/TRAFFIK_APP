<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:TRAFFIK_APP.ViewModels"
             x:Class="TRAFFIK_APP.Views.AddVehiclePage"
             x:DataType="viewmodels:AddVehicleViewModel"
             Shell.TabBarIsVisible="False"
             BackgroundColor="#0D0D0D">

    <Grid RowDefinitions="Auto,*,Auto" Padding="20">

        <!-- Header -->
        <StackLayout Grid.Row="0" Margin="0,20,0,20">
            <Label Text="Welcome back,"
                   TextColor="#C8C8C8"
                   FontSize="14"/>
            <Label Text="{Binding UserFullName}"
                   TextColor="White"
                   FontAttributes="Bold"
                   FontSize="18"/>
        </StackLayout>

        <!-- Vehicle Form -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="15">
                <Border Background="#1E1E1E" Padding="25">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>

                    <VerticalStackLayout Spacing="25">

       
                        <!-- Vehicle Image Upload -->
                        <StackLayout>
                            <Label Text="Upload Vehicle Image"
           TextColor="White" FontSize="16" Margin="0,0,0,5"/>
                            <Image Source="{Binding VehicleImage}"
           HeightRequest="150" Aspect="AspectFill"
           BackgroundColor="#333333" />
                            <Button Text="Choose Image"
            Command="{Binding UploadImageCommand}"
            BackgroundColor="White"
            TextColor="Black"
            CornerRadius="25"
            FontAttributes="Bold"
            FontSize="14"
            HeightRequest="45"/>
                        </StackLayout>


                        <StackLayout>
                            <Label Text="Vehicle Nickname"
           TextColor="White" FontSize="16" Margin="0,0,0,5"/>
                            <Entry Placeholder="E.g. My Blue Ride"
           Text="{Binding VehicleNickname}"
           TextColor="White" PlaceholderColor="Gray"
           BackgroundColor="#333333"
           HeightRequest="45"/>
                        </StackLayout>
                        
                        <!-- Vehicle Type -->
                        <StackLayout>
                            <Label Text="Vehicle Type"
                                   TextColor="White" FontSize="16" Margin="0,0,0,5"/>
                            <Picker Title="Select Vehicle Type"
                                    ItemsSource="{Binding VehicleTypes}"
                                    ItemDisplayBinding="{Binding Name}"
                                    SelectedItem="{Binding SelectedVehicleType}"
                                    TitleColor="Gray" TextColor="White"
                                    BackgroundColor="#333333"
                                    HeightRequest="45" FontSize="14"/>
                        </StackLayout>

                        <!-- Vehicle Make -->
                        <StackLayout>
                            <Label Text="Vehicle Make"
                                   TextColor="White" FontSize="16" Margin="0,0,0,5"/>
                            <Entry Placeholder="E.g. Toyota"
                                   Text="{Binding VehicleMake}"
                                   TextColor="White" PlaceholderColor="Gray"
                                   BackgroundColor="#333333"
                                   HeightRequest="45"/>
                        </StackLayout>

                        <!-- Vehicle Model -->
                        <StackLayout>
                            <Label Text="Vehicle Model"
                                   TextColor="White" FontSize="16" Margin="0,0,0,5"/>
                            <Entry Placeholder="E.g. Camry"
                                   Text="{Binding VehicleModel}"
                                   TextColor="White" PlaceholderColor="Gray"
                                   BackgroundColor="#333333"
                                   HeightRequest="45"/>
                        </StackLayout>

                        <!-- License Plate -->
                        <StackLayout>
                            <Label Text="License Plate (Optional)"
                                   TextColor="White" FontSize="16" Margin="0,0,0,5"/>
                            <Entry Placeholder="E.g. ABC 1234"
                                   Text="{Binding LicensePlate}"
                                   TextColor="White" PlaceholderColor="Gray"
                                   BackgroundColor="#333333"
                                   HeightRequest="45"/>
                        </StackLayout>

                        <!-- Add Vehicle Button -->
                        <Button Text="Save Vehicle"
                                Command="{Binding AddVehicleCommand}"
                                BackgroundColor="White"
                                TextColor="Black"
                                CornerRadius="25"
                                FontAttributes="Bold"
                                FontSize="16"
                                HeightRequest="50"/>
                    </VerticalStackLayout>
                </Border>

                <!-- Privacy note -->
                <Label Text="We only collect basic vehicle info to personalize your experience. No personal or tracking data is stored or shared."
                       FontSize="12" TextColor="#888"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"
                       Margin="0,10,0,0"/>
            </VerticalStackLayout>
        </ScrollView>

        <!-- Bottom Navigation Bar -->
        <Grid Grid.Row="2"
              BackgroundColor="#1E1E1E"
              HeightRequest="70"
              Padding="10,0"
              ColumnSpacing="25">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <StackLayout Grid.Column="0" HorizontalOptions="Center">
                <ImageButton Source="home.png"
                             Command="{Binding GoHomeCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="28" WidthRequest="28"/>
                <Label Text="Home" FontSize="12" TextColor="White" HorizontalOptions="Center"/>
            </StackLayout>

            <StackLayout Grid.Column="1" HorizontalOptions="Center">
                <ImageButton Source="appointment.png"
                             Command="{Binding GoAppointmentsCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="28" WidthRequest="28"/>
                <Label Text="Appointment" FontSize="12" TextColor="White" HorizontalOptions="Center"/>
            </StackLayout>

            <StackLayout Grid.Column="2" HorizontalOptions="Center">
                <ImageButton Source="rewards.png"
                             Command="{Binding GoRewardsCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="28" WidthRequest="28"/>
                <Label Text="Rewards" FontSize="12" TextColor="White" HorizontalOptions="Center"/>
            </StackLayout>

            <StackLayout Grid.Column="3" HorizontalOptions="Center">
                <ImageButton Source="account.png"
                             Command="{Binding GoAccountCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="28" WidthRequest="28"/>
                <Label Text="Account" FontSize="12" TextColor="White" HorizontalOptions="Center"/>
            </StackLayout>
        </Grid>
    </Grid>
</ContentPage>
