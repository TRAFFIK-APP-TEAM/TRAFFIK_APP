<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TRAFFIK_APP.Views.AccountPage"
             BackgroundColor="Black"
             Shell.TabBarIsVisible="False"
             Title="Profile">


    <Grid RowDefinitions="*,Auto">
        <ScrollView Grid.Row="0">
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- HEADER -->
                <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">

                    <ImageButton Source="bell_icon.png"
                             HeightRequest="26"
                             WidthRequest="26"
                             BackgroundColor="Transparent"
                             HorizontalOptions="End"
                             Clicked="OnNotificationClicked"/>
            </Grid>

            <!-- Greeting -->
            <VerticalStackLayout>
                <Label Text="Welcome back," TextColor="White" FontSize="16"/>
                <Label Text="{Binding FullName}" TextColor="White" FontAttributes="Bold" FontSize="18"/>
            </VerticalStackLayout>

            <!-- PROFILE INFO -->
            <Frame BackgroundColor="#1E1E1E" CornerRadius="15" Padding="20">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Edit Profile" FontSize="18" FontAttributes="Bold"
                           TextColor="White" HorizontalOptions="Center"/>

                    <Entry Text="{Binding Name}" Placeholder="First Name" TextColor="White" PlaceholderColor="#8E8E93" />
                    <Entry Text="{Binding Surname}" Placeholder="Surname" TextColor="White" PlaceholderColor="#8E8E93" />
                    <Entry Text="{Binding Email}" Placeholder="Email" Keyboard="Email" TextColor="White" PlaceholderColor="#8E8E93" />
                    <Entry Text="{Binding PhoneNumber}" Placeholder="Phone Number" Keyboard="Telephone" TextColor="White" PlaceholderColor="#8E8E93" />

                    <Button Text="Save Changes"
                            Command="{Binding SaveProfileCommand}"
                            BackgroundColor="#007AFF"
                            TextColor="White"
                            CornerRadius="12"
                            Margin="0,10,0,0"/>
                </VerticalStackLayout>
            </Frame>

            <!-- VEHICLES SECTION -->
            <Frame BackgroundColor="#1E1E1E" CornerRadius="15" Padding="20">
                <VerticalStackLayout>
                    <Label Text="Your vehicles"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="White"
                           HorizontalOptions="Center"
                           Margin="0,0,0,10"/>

                    <CollectionView ItemsSource="{Binding Vehicles}"
                                    ItemsLayout="HorizontalList"
                                    HorizontalOptions="Center">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame BackgroundColor="#333"
                                       WidthRequest="100"
                                       HeightRequest="100"
                                       CornerRadius="10"
                                       Padding="5"
                                       Margin="5">
                                    <VerticalStackLayout Spacing="5" VerticalOptions="Center">
                                        <Image Source="{Binding ImageUrl}" HeightRequest="40" HorizontalOptions="Center"/>
                                        <Label Text="{Binding Make}" TextColor="White" FontSize="13"
                                               HorizontalOptions="Center"/>
                                        <Label Text="{Binding Model}" TextColor="White" FontSize="11"
                                               HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <Button Text="Add Vehicle"
                            Command="{Binding AddVehicleCommand}"
                            BackgroundColor="White"
                            TextColor="Black"
                            CornerRadius="20"
                            Margin="0,15,0,0"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Error Message -->
            <Label Text="{Binding ErrorMessage}"
                   TextColor="Red"
                   FontSize="14"
                   IsVisible="{Binding HasError}" />

            <!-- LOGOUT BUTTON -->
            <Button Text="Logout"
                    Command="{Binding LogoutCommand}"
                    BackgroundColor="#FF3B30"
                    TextColor="White"
                    FontAttributes="Bold"
                    CornerRadius="12"
                    HeightRequest="48"
                    Margin="0,10,0,20"/>
        </VerticalStackLayout>
    </ScrollView>

        <!-- Bottom Navigation Bar -->
        <Grid Grid.Row="1"
              BackgroundColor="#1E1E1E"
              HeightRequest="70"
              Padding="10,0"
              ColumnSpacing="25">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <StackLayout Grid.Column="0" HorizontalOptions="Center">
                <ImageButton Source="home.png"
                             Command="{Binding GoHomeCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="28" WidthRequest="28"/>
                <Label Text="Home" FontSize="12" TextColor="White" HorizontalOptions="Center"/>
            </StackLayout>

            <StackLayout Grid.Column="1" HorizontalOptions="Center">
                <ImageButton Source="appointment.png"
                             Command="{Binding GoAppointmentsCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="28" WidthRequest="28"/>
                <Label Text="Appointment" FontSize="12" TextColor="White" HorizontalOptions="Center"/>
            </StackLayout>

            <StackLayout Grid.Column="2" HorizontalOptions="Center">
                <ImageButton Source="rewards.png"
                             Command="{Binding GoRewardsCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="28" WidthRequest="28"/>
                <Label Text="Rewards" FontSize="12" TextColor="White" HorizontalOptions="Center"/>
            </StackLayout>

            <StackLayout Grid.Column="3" HorizontalOptions="Center">
                <ImageButton Source="account.png"
                             Command="{Binding GoAccountCommand}"
                             BackgroundColor="Transparent"
                             HeightRequest="28" WidthRequest="28"/>
                <Label Text="Account" FontSize="12" TextColor="#007AFF" HorizontalOptions="Center"/>
            </StackLayout>
        </Grid>
    </Grid>
</ContentPage>